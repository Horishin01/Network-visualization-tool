<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>会社ネットワーク構築 (ベータ)</title>
    <link rel="stylesheet" href="../CSS/style.css" />
    <link rel="stylesheet" href="../CSS/company.css" />
</head>
<body>
    <header class="site-header">
        <div class="container header-row">
            <h1 class="site-title">会社ネットワーク構築 (ベータ)</h1>
            <nav class="site-nav">
                <a href="../index.html">ホーム</a>
                <a href="./training.html">トレーニング</a>
                <a href="./sub.html">このサイトについて</a>
            </nav>
        </div>
    </header>

    <main class="container company-shell">
        <section class="card hero">
            <div>
                <h2>Office Network Builder</h2>
                <p>ONU と社内ルーター、Web サーバー、内部端末をドラッグ＆ドロップで配置し、光ファイバーと RJ45 ケーブルで配線します。光 → ONU → ルーター → Web サーバーの 3 本が揃うとトレーニング画面の会社判定も T になります。</p>
                <p class="hint">FTP 判定: 光 → ONU → ルーター → FTP サーバー が揃うと FTP バッジが T になり、トレーニング画面の FTP コンソールが開きます。</p>
            </div>
            <div class="hero-actions">
                <span class="badge status" id="companyStatusBadge">F</span>
                <span class="badge status ftp" id="ftpStatusBadge" title="FTP接続判定">FTP:F</span>
                <button id="btnClearAll" class="btn ghost">全ノード削除</button>
            </div>
        </section>

        <div class="company-workspace">
            <section class="card stage-card">
                <header class="stage-header">
                    <div>
                        <h3>キャンバス</h3>
                        <p>ノードを配置し、配線ツールを選んでポートを順にクリックすると接続できます。</p>
                    </div>
                    <div class="tool-buttons">
                        <button class="tool-btn" data-tool="fiber">光ファイバー</button>
                        <button class="tool-btn" data-tool="rj45">RJ45 ケーブル</button>
                    </div>
                </header>
                <div id="companyStage" class="stage" aria-label="会社ネットワークキャンバス">
                    <button id="fiberAnchor" class="fiber-anchor" title="光回線 (WAN)">光</button>
                    <svg id="companyCables" class="cable-layer" width="100%" height="100%"></svg>
                </div>
                <footer class="stage-footer">
                    <p>ノードはドラッグで移動できます。ポートをクリックすると接続先を選択できます。ノード右上の ✕ で削除できます。</p>
                </footer>
            </section>

            <aside class="side-panel">
                <section class="card panel">
                    <h3>ノードパレット</h3>
                    <div id="companyPalette" class="palette">
                        <button data-node-type="onu">ONU</button>
                        <button data-node-type="router">社内ルーター</button>
                        <button data-node-type="web">Web サーバー</button>
                        <button data-node-type="ftp">FTP サーバー</button>
                        <button data-node-type="pc">社員PC</button>
                        <button data-node-type="dns">DNS サーバー</button>
                        <button data-node-type="db">DB サーバー</button>
                        <button data-node-type="mail">Mail サーバー</button>
                    </div>
                </section>

                <section class="card panel">
                    <h3>DNS Connectivity</h3>
                    <form id="dnsCheckForm" class="dns-form" autocomplete="off">
                        <label>
                            <span>ドメイン名</span>
                            <input id="dnsHost" type="text" value="example.com" />
                        </label>
                        <button class="btn ghost" type="submit">疎通チェック</button>
                        <p id="dnsResult" class="hint">HTTPS アクセスを試行し、結果を表示します。</p>
                    </form>
                </section>

                <section class="card panel">
                    <h3>デバッグ</h3>
                    <button id="btnDumpState" class="btn ghost" type="button">状態をダンプ</button>
                    <pre id="debugDump" class="dump" aria-live="polite"></pre>
                </section>
            </aside>
        </div>
    </main>

    <footer class="site-footer">
        <div class="container">
            <small>© 2025 ネットワーク学習プロジェクト. All Rights Reserved.</small>
        </div>
    </footer>

    <script src="../JS/store.js"></script>
    <script>
        AppStore.configure({ key: 'app:network:saves:default', version: 1 });
    </script>
    <script src="../JS/company_store_bridge.js"></script>
    <script src="../JS/company.js" defer></script>
</body>
</html>
