<!-- training.html -->
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8" />
    <title>ネットワーク学習ツール</title>

    <!-- 既存CSS -->
    <link rel="stylesheet" href="../CSS/style.css" />
    <link rel="stylesheet" href="../CSS/map.css" />

    <!-- Leaflet -->
    <link rel="stylesheet"
          href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
          crossorigin="" />
</head>
<body>
    <header>
        <h1>ネットワーク学習ツール</h1>
        <nav>
            <ul>
                <li><a href="../index.html">ホーム</a></li>
                <li><a href="#">トレーニング</a></li>
                <li><a href="#">このサイトについて</a></li>
            </ul>
        </nav>
    </header>

    <main class="page-wrap">
        <section class="main-section">
            <h2>日本地図（インタラクティブ） ＋ 操作画面プレビュー</h2>

            <div class="grid">
                <!-- 左：日本地図（常に正方形） -->
                <div class="card">
                    <div class="card-head">日本地図（クリックでページ遷移）</div>
                    <div class="card-body">
                        <div id="map" role="img" aria-label="日本地図（インタラクティブ）"></div>
                        <p class="note">東京＝自宅Wi-Fi、福岡＝会社ネットワーク。バッジは接続状況を示します。</p>
                        <div style="margin-top:8px; font-size:12px; color:#444;">
                            状態: <span id="diag">—</span>
                        </div>
                    </div>
                </div>

                <!-- 右：操作画面プレビュー＋診断 -->
                <aside class="preview-col">
                    <div class="card">
                        <div class="card-head" style="display:flex;justify-content:space-between;align-items:center;gap:8px;">
                            <span>ユーザーがWebにアクセス</span>
                            <a class="btn primary" href="./home.html">開く</a>
                        </div>
                        <div class="card-body">
                            <iframe class="preview-iframe" src="./home.html" loading="lazy" title="home preview"></iframe>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-head" style="display:flex;justify-content:space-between;align-items:center;gap:8px;">
                            <span>会社（HTMLアップ）</span>
                            <a class="btn primary" href="./company.html">開く</a>
                        </div>
                        <div class="card-body">
                            <iframe class="preview-iframe" src="./company.html" loading="lazy" title="company preview"></iframe>
                        </div>
                    </div>

                    <!-- 保存・診断 -->
                    <div class="card">
                        <div class="card-head">保存状態（メモリ診断）</div>
                        <div class="card-body" style="display:grid; gap:8px;">
                            <div class="row" style="display:flex; gap:8px; flex-wrap:wrap;">
                                <button id="btn-reload" class="btn">保存状態を再読込</button>
                                <button id="btn-save-home-ok" class="btn">Home 到達を保存（テスト）</button>
                                <button id="btn-save-company-ok" class="btn">Company 到達を保存（テスト）</button>
                                <button id="btn-clear" class="btn">全消去（localStorage）</button>
                            </div>
                            <p class="note">全ページ共通で localStorage を使用します（同一オリジン）。</p>
                        </div>
                    </div>
                </aside>
            </div>

            <noscript>
                <p>JavaScript が無効のため静的地図を表示します。</p>
                <img src="../assets/japan-map.png" alt="日本地図（静的画像）" width="600" height="600" />
            </noscript>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 ネットワーク学習プロジェクト. All Rights Reserved.</p>
    </footer>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin=""></script>

    <!-- すべてのHTML共通の前段に置く -->
    <script src="../JS/store.js"></script>
    <script>
        AppStore.configure({
            key: 'app:network:saves:default',
            version: 1,
            scope: 'local',        // 単一タブ内で共有/local：タブ間共有・永続
            importOnStart: true      // 初回に local → session を自動取り込み
        });
    </script>

    <!-- training 起動 -->
    <script src="../JS/training_boot.js" defer></script>
    <script src="../JS/training.js"></script>
</body>
</html>
