```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8" />
    <title>ネットワーク学習ツール</title>

    <!-- 既存CSS -->
    <link rel="stylesheet" href="../CSS/style.css" />
    <link rel="stylesheet" href="../CSS/map.css" />

    <!-- Leaflet（地図用） -->
    <link rel="stylesheet"
          href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
          crossorigin="" />


</head>
<body>

    <!-- ▼ 共通ヘッダー -->
    <header>
        <h1>ネットワーク学習ツール</h1>
        <nav>
            <ul>
                <li><a href="../index.html">ホーム</a></li>
                <li><a href="#">トレーニング</a></li>
                <li><a href="#">このサイトについて</a></li>
            </ul>
        </nav>
    </header>

    <!-- ▼ メインコンテンツ -->
    <main class="page-wrap">
        <section class="main-section">
            <h2>日本地図（インタラクティブ）＋ 操作画面プレビュー</h2>

            <div class="grid">
                <!-- 左：日本地図（正方形） -->
                <div class="card">
                    <div class="card-head">日本地図（クリックでページ遷移）</div>
                    <div class="card-body">
                        <div id="map" role="img" aria-label="日本地図（インタラクティブ）"></div>
                        <p class="note">東京＝自宅Wi-Fi、福岡＝会社ネットワーク。地図は常に正方形で表示します。</p>
                    </div>
                </div>

                <!-- 右：操作画面プレビュー -->
                <aside class="preview-col">
                    <div class="card">
                        <div class="card-head" style="display:flex;justify-content:space-between;align-items:center;gap:8px;">
                            <span>自宅 Wi-Fi 構築シミュレータ</span>
                            <a class="btn primary" href="./home.html">開く</a>
                        </div>
                        <div class="card-body">
                            <iframe class="preview-iframe" src="./home.html" loading="lazy" title="home preview"></iframe>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-head" style="display:flex;justify-content:space-between;align-items:center;gap:8px;">
                            <span>会社ネットワーク構築（ベータ）</span>
                            <a class="btn primary" href="./company.html">開く</a>
                        </div>
                        <div class="card-body">
                            <iframe class="preview-iframe" src="./company.html" loading="lazy" title="company preview"></iframe>
                        </div>
                    </div>
                </aside>
            </div>

            <!-- JavaScript無効時の静的フォールバック（任意） -->
            <noscript>
                <p>JavaScript が無効のため静的地図を表示します。</p>
                <img src="../assets/japan-map.png" alt="日本地図（静的画像）" width="600" height="600" />
            </noscript>
        </section>
    </main>

    <!-- ▼ 共通フッター -->
    <footer>
        <p>&copy; 2025 ネットワーク学習プロジェクト. All Rights Reserved.</p>
    </footer>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin=""></script>

    <script>
        // ===== 地図の初期化 =====
        const INITIAL_ZOOM = 5;
        const JAPAN_BOUNDS = L.latLngBounds([24.0, 122.0], [46.2, 146.0]);

        const map = L.map('map', {
            zoomControl: true,
            attributionControl: true,
            minZoom: INITIAL_ZOOM,
            maxZoom: 12,
            maxBounds: JAPAN_BOUNDS,
            maxBoundsViscosity: 1.0
        }).setView([36.5, 137.0], INITIAL_ZOOM);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);

        // ヘルパー
        const pin = (name, lat, lng) =>
            L.marker([lat, lng], { title: name })
                .addTo(map)
                .bindTooltip(name, { direction: 'top', offset: [0, -8] });

        // 通常の都市ピン
        pin('札幌', 43.0621, 141.3544);
        pin('大阪', 34.7025, 135.4959);

        // 東京 → home.html
        const tokyoMarker = pin('東京（クリックでホームへ）', 35.6812, 139.7671);
        tokyoMarker.on('click', () => { window.location.href = 'home.html'; });

        // 福岡 → company.html
        const fukuokaMarker = pin('福岡（クリックで会社へ）', 33.5902, 130.4017);
        fukuokaMarker.on('click', () => { window.location.href = 'company.html'; });

        // クリック可能であることをカーソルで示す
        function setPointerCursor(m) {
            m.on('add', () => { if (m._icon) m._icon.style.cursor = 'pointer'; });
        }
        setPointerCursor(tokyoMarker);
        setPointerCursor(fukuokaMarker);

        // レイアウト確定後とリサイズ時に再計算（正方形でもLeafletを正しく描画）
        window.addEventListener('load', () => setTimeout(() => map.invalidateSize(), 0));
        window.addEventListener('resize', () => map.invalidateSize());
    </script>
</body>
</html>
