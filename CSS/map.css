/* このページだけの最小CSS（正方形地図＋プレビュー） */

:root {
    --map-border: #c5ccd6;
    --map-bg: #f7f9fc;
    --card-border: #e3e8f0;
    --card-bg: #fff;
}

/* 外枠 */
.page-wrap {
    max-width: 1200px;
    margin: 0 auto;
    padding: 24px;
}

header, footer {
    max-width: 1200px;
    margin: 0 auto;
}

nav ul {
    list-style: none;
    padding: 0;
    display: flex;
    gap: 16px;
}

nav a {
    text-decoration: none;
    color: #1a1a1a;
}

/* 2カラム：左=地図（正方形）/ 右=操作画面プレビュー */
.grid {
    display: grid;
    gap: 16px;
    grid-template-columns: 1fr 420px;
    align-items: start;
}

@media (max-width: 980px) {
    .grid {
        grid-template-columns: 1fr;
    }
}

.card {
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    border-radius: 12px;
}

.card-head {
    padding: 10px 14px;
    font-weight: 700;
    border-bottom: 1px solid var(--card-border);
}

.card-body {
    padding: 12px;
}

/* 正方形の地図 */
#map {
    width: 100%;
    aspect-ratio: 1 / 1; /* 常に正方形 */
    border: 1px solid var(--map-border);
    border-radius: 12px;
    background: var(--map-bg);
}

/* Leafletの下地色を角丸に揃える */
.leaflet-container {
    background: var(--map-bg);
}

/* プレビュー */
.preview-col {
    display: grid;
    gap: 12px;
}

.preview-iframe {
    width: 100%;
    aspect-ratio: 16 / 10;
    border: 0;
    display: block;
    pointer-events: none; /* 触れないミニプレビュー */
    background: #fff;
}

.head-inline {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 8px;
}

.badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 32px;
    padding: 2px 10px;
    border-radius: 999px;
    font-weight: 700;
    font-size: 13px;
}

.badge-ok {
    background: #dcfce7;
    color: #15803d;
}

.badge-ng {
    background: #fee2e2;
    color: #b91c1c;
}

.pc-card .card-body,
.company-card .card-body {
    display: grid;
    gap: 12px;
}

.pc-window {
    border: 1px solid #cad6ed;
    border-radius: 14px;
    background: #f7f9ff;
    overflow: hidden;
    box-shadow: inset 0 0 0 1px rgba(15, 23, 42, 0.04);
}

.pc-window__bar {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 12px;
    background: linear-gradient(90deg, #1e3a8a, #2563eb);
    color: #fff;
    font-weight: 600;
    font-size: 13px;
}

.pc-led {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    display: inline-flex;
    background: rgba(255, 255, 255, 0.4);
}

.pc-led.red { background: #f87171; }
.pc-led.yellow { background: #fbbf24; }
.pc-led.green { background: #34d399; }

.pc-address {
    display: flex;
    gap: 6px;
    align-items: center;
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
    font-size: 13px;
    padding: 8px 12px;
    border-bottom: 1px solid #d9e1f5;
    background: #fff;
}

.pc-screen {
    min-height: 220px;
    background: #0f172a;
    color: #f8fafc;
    padding: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    transition: background 0.3s ease, color 0.3s ease;
}

.pc-screen.online {
    background: #ffffff;
    color: #0f172a;
}

.pc-screen__google {
    text-align: left;
    width: 100%;
    max-width: 380px;
}

.pc-screen__google h3 {
    margin: 0 0 12px;
    font-size: 22px;
    color: #1a1a1a;
}

.pc-screen__google .search {
    display: flex;
    gap: 8px;
    margin-bottom: 12px;
}

.pc-screen__google .search input {
    flex: 1;
    padding: 8px 10px;
    border-radius: 999px;
    border: 1px solid #cbd5f5;
    font-size: 13px;
}

.pc-screen__google .search button {
    border: 0;
    border-radius: 999px;
    background: #2563eb;
    color: #fff;
    padding: 8px 16px;
    font-weight: 600;
}

.pc-screen__google ul {
    list-style: disc;
    padding-left: 20px;
    color: #374151;
    font-size: 13px;
}

.pc-screen__error {
    display: grid;
    gap: 6px;
    font-size: 14px;
}

.pc-links {
    display: flex;
    justify-content: flex-end;
}

.company-body .preview-iframe[hidden] {
    display: none;
}

.preview-lock {
    border: 1px dashed #cfd8f3;
    border-radius: 12px;
    padding: 16px;
    background: #f8fbff;
    color: #556075;
    font-size: 13px;
}

.ftp-state {
    display: flex;
    align-items: center;
    gap: 8px;
    font-weight: 600;
}

.ftp-console {
    display: grid;
    gap: 10px;
    border: 1px solid #dfe5f5;
    border-radius: 12px;
    padding: 12px;
    background: #f7faff;
}

.ftp-console.disabled {
    opacity: 0.6;
    pointer-events: none;
}

.ftp-console__slots {
    display: grid;
    gap: 8px;
}

.ftp-slot {
    border: 1px solid #d8def0;
    border-radius: 10px;
    padding: 10px;
    background: #fff;
}

.ftp-slot.active {
    outline: 2px solid #2563eb;
    outline-offset: 2px;
}

.ftp-slot__head {
    display: flex;
    justify-content: space-between;
    gap: 8px;
    align-items: center;
}

.ftp-slot__title {
    font-weight: 700;
}

.ftp-slot__hint {
    font-size: 12px;
    color: #6b7280;
}

.ftp-slot__file {
    font-size: 13px;
    color: #111827;
    margin-bottom: 6px;
}

.ftp-slot__actions {
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
}

.ftp-console__controls {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    align-items: flex-end;
}

.ftp-console__controls select {
    min-width: 220px;
    padding: 6px 10px;
    border: 1px solid #d4dbe9;
    border-radius: 8px;
}

.ftp-preview {
    border: 1px solid #dfe5f5;
    border-radius: 10px;
    background: #fff;
    overflow: hidden;
}

.ftp-preview__head {
    padding: 8px 10px;
    background: #eef3ff;
    border-bottom: 1px solid #dfe5f5;
    font-weight: 600;
    font-size: 13px;
}

.ftp-preview iframe {
    width: 100%;
    height: 220px;
    border: none;
    background: #fff;
}

/* ボタン */
.btn {
    padding: 8px 12px;
    border: 1px solid var(--card-border);
    background: #fff;
    border-radius: 8px;
    cursor: pointer;
}

    .btn.primary {
        background: #1b5cff;
        color: #fff;
        border-color: #1b5cff;
    }
    
    .btn.ghost {
        background: #fff;
        border-color: #d4dbe9;
        color: #1f2937;
    }

.note {
    font-size: 12px;
    color: #5b6477;
    padding-top: 8px;
}

/* 追加：保存状態ビューア用 */
.dump {
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
    font-size: 12px;
    background: #f8fafc;
    color: #0f172a;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    padding: 10px 12px;
    height: 200px;
    overflow: auto;
    white-space: pre-wrap;
    word-break: break-all;
}

/* 追加：軽いトースト通知 */
.toast {
    position: fixed;
    right: 20px;
    bottom: 20px;
    max-width: 420px;
    background: #111827;
    color: #fff;
    border-radius: 10px;
    padding: 10px 14px;
    box-shadow: 0 8px 20px rgba(0,0,0,.25);
    opacity: 0;
    pointer-events: none;
    transform: translateY(8px);
    transition: opacity .25s ease, transform .25s ease;
    z-index: 9999;
}

    .toast.on {
        opacity: 1;
        transform: translateY(0);
    }
