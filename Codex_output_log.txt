Codex 作業ログ
==============

エントリ 1:
- VS Code で静的サイトを動かすための Node/Vite ツールチェーン（package.json、vite.config.js、.vscode/tasks.json、.vscode/launch.json、README、.gitignore）を追加。
- 依存関係のインストールと dev サーバー起動手順、生成物を git へ含めない運用を README に記載。

エントリ 2:
- VS Code デバッガーの要件に合わせ、Chrome/Edge 構成を `type: "chrome"` / `type: "msedge"` に変更。

エントリ 3:
- Node を使わずに `python -m http.server 8080` で動かせるよう、専用タスク・起動構成と README の案内を追加。

エントリ 4:
- Windows の Python ランチャー `py -3` を用いる手順に更新し、Microsoft Store の疑似コマンドを回避。

エントリ 5:
- 会社側で DNS 疎通判定機能、トポロジ保存、Home↔Company ハブ画面（リンクモニタ・擬似 FTP・仮想ブラウザ）を実装し、GitHub Pages 公開まで含めたドキュメントを整備。

エントリ 6:
- 日本地図ページのサイド UI を Windows 風ブラウザ画面／会社プレビューに刷新し、Home 3/3 で Google 接続 T・未達成で F を表示。
- 会社ネットワークは ONU→ルーター→Web サーバーが揃った時点で T 判定とし、FTP アクセス状態 (T/F) と連動して company.html を動的ロードするよう変更。
- `company.js` の AppStore 連携を拡張し、Web サーバー検出・FTP 可否などの情報を保存してトレーニング画面に反映。

エントリ 7:
- 会社用のストレージ橋渡し `company_store_bridge.js` を新設し、Home と同様に AppStore 上へ edges / reach / status を保存できるようにした。
- `company.html` のスクリプト読込順を調整 (`store.js` → `company_store_bridge.js` → `company.js`) し、`syncCompanyStore` はイベント経由で保存を委譲する形に整理。
- これにより localStorage 上で company オブジェクトの判定結果が恒常的に確認可能。

エントリ 8:
- `company_store_bridge.js` を Home ブリッジと同じ構造へ刷新し、`edges/reach/status` を正規化して AppStore.patch へ書き込み、リセット／read API も公開。
- `company.js` の `syncCompanyStore` はブリッジを直接呼び出した上で（必要に応じて）カスタムイベントを配信するよう変更し、ローカルストレージに確実に反映されるようにした。

エントリ 9:
- 会社シミュレータも Home 同様にキャンバス状態（ノード座標・接続・モード・IP割当）を `AppStore` へ保存/復元する `persistCompanyCanvas` / `restoreCompanyCanvas` を実装。
- `spawnNode` をスナップショット復元向けに拡張し、ドラッグ・接続・削除・リセットなど主要操作のたびに自動保存するよう追加。
- ページ再読み込み後もレイアウトが保持され、ONU→ルータ→Webサーバーで T になる判定がローカルストレージに反映されるようになった。

エントリ 10:
- `company_store_bridge.js` / `company.js` の判定仕様を Home と同じ形式（3 本のエッジ: fiberOnu / onuRouter / routerWeb が全て T なら companyOK）へそろえ、線を引くたびに `CompanyEdges.set()` が localStorage の `company.edges` を更新するように変更。

今後の更新:
- 以降の変更・追加内容も本ファイルへ順次追記する。
\nGg 11:\n- DNS `FbNOɌ݂̃m[hWEڑEۑAAppStore ւ company.lastDnsCheck ݂̂ǉ`ɕύXBɂ DNS {^Ăۑς݂̏ԂȂB\n- storage CxgĎđ^u localStorage ۂɂ estoreCompanyCanvas() sA^u܂łԂ悤ɂB\n̍XV:\n- ȍ~̕ύXEǉe{t@C֏ǋLB
Gg 12:\n- ЃV~[^vZGbW localStorage (company:lastEdges) ɂ݁AAppStore XVfȂuEUłŐVԂQƂł悤ɂB\n- training.js  AppStore ɒlꍇł fallback ǂݎĎO{̐ڑ𔻒肷邽߁AChrome / Firefox ǂł[U[PCEЃJ[h T/F ؂ւB\n
Gg 13:\n- training.js  Home/Company ̔ summary ł͂ȂAlocalStorage ɕۑꂽGbWlD悵ČvZ悤CBsummary  false ̂܂܂łz T ɂȂ悤ɂB\n
Gg 14:\n- company.js  localStorage ݂Sɍswp[ǉA^uł storage Cxg𖳎ʃ^uł͎悤ɂBЃV~[^ŕۑm[h/肪^u (training Ȃ) ƋL܂B\n
Gg 15:\n- CompanyStoreBridge.mark/reset CAۑEZbgΏۂ̃GbW fiberOnu / onuRouter / routerPc ɑBɂ company.edges  Training y[WƊSɈvB\n
Gg 16:\n- Ѓy[W/JS/CSS SʍVBm[hzuEz UI Đ݌vA/RJ45 ڑEhbOE폜EDNS `FbNEfobO_vVB\n- Home Ɠf[^\ (AppStore+localStorage)  canvas/edges ۑAChrome/Firefox ǂł Training ֑f悤ɂB\n
Gg 17:\n- company.js ̔zɘaAONU ƃ[^[A[^[ Web T[o[ RJ45 ŐڑĂ΃|[gʂ킸 T ɂȂ悤ɂBŃ[U[Cӂ̃|[gŔzĂ Training ɔf܂B\n
\nGg 18:\n- company.js āX\zAHome Ɠ̒ʐMpf[^\ɍ킹o[Wdグ邽߁A8,000 s̎bR[ho͂܂B{C[v[g߁ÃGg͖Ƃ݂ȂĂB
Gg 18:\n- RJ45 ڑ̔OtTɕύXAONU-[^[ԁ^[^[-Web Ԃm[hoRĂĂ T ɂȂ悤ɏCBɂДzRɍ\łATraining ֐fB\n
